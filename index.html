<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíå</title>

  <style>
    :root{
      --bg1:#0b0b10;
      --bg2:#161428;

      --card1: rgba(255,255,255,.12);
      --card2: rgba(255,255,255,.07);
      --border: rgba(255,255,255,.18);

      --text: #f7f6ff;
      --muted: rgba(255,255,255,.74);

      --btn: #ffffff;
      --btnText:#15121f;

      --btnSoft: rgba(255,255,255,.12);
      --btnSoftText:#f7f6ff;

      --shadow: 0 18px 70px rgba(0,0,0,.50);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue";
      color:var(--text);
      background:
        radial-gradient(1100px 700px at 20% 10%, rgba(255,150,210,.16) 0%, transparent 60%),
        radial-gradient(1000px 700px at 80% 18%, rgba(150,210,255,.12) 0%, transparent 60%),
        radial-gradient(900px 650px at 55% 85%, rgba(255,235,170,.10) 0%, transparent 62%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow:hidden;
    }

    .glow{
      position:fixed;
      inset:-220px;
      background:
        radial-gradient(420px 320px at 28% 30%, rgba(255,120,180,.12), transparent 60%),
        radial-gradient(380px 280px at 72% 40%, rgba(140,200,255,.10), transparent 60%),
        radial-gradient(360px 300px at 55% 78%, rgba(255,230,160,.08), transparent 62%);
      filter: blur(12px);
      pointer-events:none;
      animation: drift 12s ease-in-out infinite alternate;
    }
    @keyframes drift{
      from{ transform: translate3d(-12px,-10px,0) scale(1.02); }
      to{ transform: translate3d(14px,12px,0) scale(1.04); }
    }

    .fx-layer{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:1;
      overflow:hidden;
    }
    .heart{
      position:absolute;
      bottom:-30px;
      font-size:18px;
      opacity:0;
      transform: translateY(0) translateX(0) scale(1);
      animation: floatUp 1.9s ease-out forwards;
      filter: drop-shadow(0 6px 18px rgba(0,0,0,.25));
    }
    @keyframes floatUp{
      0%   { opacity:0; transform: translateY(0) translateX(0) scale(.9); }
      12%  { opacity:1; }
      100% { opacity:0; transform: translateY(-250px) translateX(var(--dx)) scale(1.25); }
    }

    .wrap{ width:min(760px, 100%); position:relative; z-index:2; }

    .card{
      background: linear-gradient(180deg, var(--card1), var(--card2));
      border:1px solid var(--border);
      border-radius:28px;
      box-shadow: var(--shadow);
      padding:28px;
      backdrop-filter: blur(12px);
      overflow:hidden;
      position:relative;
    }

    .top{ display:flex; align-items:center; justify-content:center; margin-bottom:16px; }
    .badge{
      font-size:14px;
      letter-spacing:.08em;
      color: rgba(255,255,255,.88);
      padding:8px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      user-select:none;
    }

    .stage{ position:relative; min-height:320px; }

    .scene{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:16px 6px;
      opacity:0;
      transform: translateY(10px) scale(.99);
      pointer-events:none;
      transition: opacity .38s ease, transform .38s ease;
    }
    .scene.active{
      opacity:1;
      transform: translateY(0) scale(1);
      pointer-events:auto;
    }

    h1{
      margin:0 0 10px 0;
      font-weight:780;
      font-size: clamp(28px, 4vw, 42px);
      line-height:1.12;
      letter-spacing:-.02em;
    }
    p{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size: clamp(14px, 2.2vw, 16px);
      line-height:1.5;
      white-space: pre-wrap;
    }

    .btns{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:center;
      gap:12px;
      margin-top:10px;
    }
    button{
      border:none;
      cursor:pointer;
      border-radius:14px;
      padding:12px 16px;
      font-weight:750;
      font-size:16px;
      transition: transform .12s ease, filter .18s ease, background .18s ease, opacity .18s ease;
      user-select:none;
      min-width: 210px;
    }
    button:active{ transform: scale(.98); }
    button:hover{ filter: brightness(1.04); }

    .primary{
      background: var(--btn);
      color: var(--btnText);
    }
    .ghost{
      background: var(--btnSoft);
      color: var(--btnSoftText);
      border:1px solid rgba(255,255,255,.18);
    }

    .small{
      margin-top:12px;
      font-size:13px;
      color: rgba(255,255,255,.70);
      user-select:none;
    }

    .footer{
      margin-top:16px;
      display:flex;
      justify-content:center;
      align-items:center;
      color:rgba(255,255,255,.55);
      font-size:12px;
      user-select:none;
    }
    .progress{ display:flex; gap:8px; align-items:center; }
    .dot{
      width:9px;height:9px;border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.10);
      transition: transform .18s ease, background .18s ease;
    }
    .dot.on{ background: rgba(255,255,255,.92); border-color: rgba(255,255,255,.0); transform: scale(1.08); }

    /* toast */
    .toast{
      position:fixed;
      left:50%;
      bottom:26px;
      transform:translateX(-50%) translateY(8px);
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(20,18,32,.75);
      color:rgba(255,255,255,.92);
      backdrop-filter:blur(10px);
      box-shadow:0 18px 70px rgba(0,0,0,.45);
      font-weight:700;
      font-size:14px;
      opacity:0;
      pointer-events:none;
      transition:opacity .22s ease, transform .22s ease;
      z-index:9999;
      white-space:nowrap;
      max-width: calc(100vw - 32px);
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .toast.on{
      opacity:1;
      transform:translateX(-50%) translateY(0);
    }

    /* runaway "No" */
    .no-wrap{
      position: relative;
      width: 100%;
      max-width: 520px;
      margin: 0 auto;
    }
    .runaway{
      position: relative;
      will-change: transform;
    }
    .runaway.shake{
      animation: shake .18s linear;
    }
    @keyframes shake{
      0%{ transform: translate(0,0); }
      30%{ transform: translate(-2px,1px); }
      60%{ transform: translate(2px,-1px); }
      100%{ transform: translate(0,0); }
    }

    @media (max-width: 520px){
      .card{ padding:20px; border-radius:22px; }
      button{ min-width: 185px; }
      .stage{ min-height: 400px; }
      .toast{ font-size:13px; }
    }
  </style>
</head>

<body>
  <div class="glow"></div>
  <div class="fx-layer" id="fx"></div>
  <div class="toast" id="toast"></div>

  <div class="wrap">
    <div class="card" role="application" aria-label="–ú–∏–Ω–∏-—Å–∞–π—Ç">
      <div class="top">
        <div class="badge">üíå</div>
      </div>

      <div class="stage">
        <!-- 1 -->
        <section class="scene active" data-scene="1">
          <div>
            <h1 id="q1Title"></h1>
            <div class="btns no-wrap" id="q1Btns">
              <button class="primary" id="q1Yes">–î–∞</button>
              <button class="ghost runaway" id="q1No">–ù–µ—Ç</button>
            </div>
          </div>
        </section>

        <!-- 2 -->
        <section class="scene" data-scene="2">
          <div>
            <h1 id="q2Title"></h1>
            <div class="btns">
              <button class="primary" id="q2Yes">–î–∞</button>
              <button class="ghost" id="q2No">–ù–µ—Ç</button>
            </div>
          </div>
        </section>

        <!-- 3 -->
        <section class="scene" data-scene="3">
          <div>
            <h1 id="q3Title"></h1>
            <div class="btns">
              <button class="primary" id="q3Yes">–î–∞</button>
              <button class="ghost" id="q3Walk">–î–∞–≤–∞–π –ø—Ä–æ—Å—Ç–æ –ø–æ–≥—É–ª—è–µ–º</button>
            </div>
          </div>
        </section>

        <!-- 4: final -->
        <section class="scene" data-scene="4">
          <div>
            <h1 id="finalTitle"></h1>
            <p id="finalText"></p>
            <div class="btns">
              <button class="primary" id="copyBtn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
              <button class="ghost" id="tgBtn">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</button>
              <button class="ghost" id="restartBtn">–ï—â—ë —Ä–∞–∑</button>
            </div>
            <div class="small" id="finalHint"></div>
          </div>
        </section>
      </div>

      <div class="footer">
        <div class="progress" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å">
          <span class="dot on" data-dot="1"></span>
          <span class="dot" data-dot="2"></span>
          <span class="dot" data-dot="3"></span>
          <span class="dot" data-dot="4"></span>
        </div>
      </div>
    </div>
  </div>

  <script>
    const CONFIG = {
      name: "–†–∏–Ω–∞",
      telegram: {
        url: "https://t.me/xnryyy_xnryyy",
        buttonLabel: "–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram"
      },
      text: {
        q1: "–Ø —Ç–µ–±–µ –Ω—Ä–∞–≤–ª—é—Å—å?üôÑ",
        q2: "–•–º–º‚Ä¶ –∞ —á—É—Ç—å-—á—É—Ç—å?üò¢",
        q3: "–¢–æ–≥–¥–∞ —Ç–∞–∫: –ø–æ–π–¥—ë–º –Ω–∞ —Å–≤–∏–¥–∞–Ω–∏–µ?",
      },
      finals: {
        yesDate: {
          title: "–£—Ä–∞!ü•∞",
          text: (name) => `${name}, –ø–æ–π–¥—ë–º –Ω–∞ —Å–≤–∏–¥–∞–Ω–∏–µ üíó`,
          hint: "–¢–µ–∫—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω ‚Äî –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å"
        },
        walk: {
          title: "–£—Ä–∞!ü•∞",
          text: (name) => `${name}, –¥–∞–≤–∞–π –ø—Ä–æ—Å—Ç–æ –ø–æ–≥—É–ª—è–µ–º üåô`,
          hint: "–¢–µ–∫—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω ‚Äî –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å"
        },
        softNo: {
          title: "–ñ–∞–ª—å(",
          text: (name) => `${name}, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç—ã –Ω–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—à—å –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—èü§ç`,
          hint: ""
        }
      }
    };

    const $ = (id) => document.getElementById(id);
    const scenes = [...document.querySelectorAll(".scene")];
    const dots = [...document.querySelectorAll(".dot")];
    const fxLayer = $("fx");
    const toastEl = $("toast");

    let toastTimer = null;
    let copyPayload = "";

    // runaway state
    let noJumps = 0;
    const MAX_JUMPS = 20;

    function setActiveScene(id){
      scenes.forEach(s => s.classList.toggle("active", s.dataset.scene === String(id)));
      dots.forEach(d => d.classList.toggle("on", d.dataset.dot === String(id)));
    }

    function spawnHearts(count = 10){
      const emojis = ["üíó","üíñ","üíò","üíû","üíì"];
      for(let i=0;i<count;i++){
        const el = document.createElement("div");
        el.className = "heart";
        el.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        const x = Math.random() * 100;
        const dx = (Math.random()*120 - 60).toFixed(0) + "px";
        el.style.left = x + "vw";
        el.style.setProperty("--dx", dx);
        el.style.animationDuration = (1.6 + Math.random()*0.9).toFixed(2) + "s";
        el.style.fontSize = (16 + Math.random()*10).toFixed(0) + "px";
        fxLayer.appendChild(el);
        el.addEventListener("animationend", () => el.remove());
      }
    }

    document.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if(!btn) return;
      spawnHearts(8);
    });

    function showToast(message){
      toastEl.textContent = message;
      toastEl.classList.add("on");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toastEl.classList.remove("on"), 1700);
    }

    async function safeCopy(text){
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch{
        try{
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          return true;
        }catch{
          return false;
        }
      }
    }

    function goFinal(kind){
      const name = CONFIG.name;
      const f = CONFIG.finals[kind];

      $("finalTitle").textContent = f.title;
      copyPayload = f.text(name);

      $("finalText").textContent  = copyPayload;
      $("finalHint").textContent  = f.hint || "";
      $("copyBtn").dataset.copy = copyPayload;

      $("tgBtn").textContent = CONFIG.telegram.buttonLabel;

      setActiveScene(4);
      spawnHearts(18);
    }

    // ---- Runaway "No" on screen 1
    function moveNoButton(){
      const wrap = $("q1Btns");
      const btn = $("q1No");
      if(!wrap || !btn) return;
      if(noJumps >= MAX_JUMPS) return;

      const wrapRect = wrap.getBoundingClientRect();
      const btnRect = btn.getBoundingClientRect();

      const maxX = Math.max(0, wrapRect.width - btnRect.width);
      const maxY = Math.max(0, 120);

      const x = Math.floor(Math.random() * (maxX + 1));
      const y = Math.floor((Math.random() * (maxY * 2 + 1)) - maxY);

      btn.style.transform = `translate(${x}px, ${y}px)`;

      noJumps += 1;

      btn.classList.add("shake");
      setTimeout(() => btn.classList.remove("shake"), 220);

      if(noJumps === 2) btn.textContent = "–ù–µ—Ç‚Ä¶";
      if(noJumps === 3) btn.textContent = "–ù–µ—Ç";
    }

    // reset runaway when restarting / leaving scene
    function resetRunaway(){
      noJumps = 0;
      const btn = $("q1No");
      if(btn){
        btn.textContent = "–ù–µ—Ç";
        btn.style.transform = "translate(0px, 0px)";
      }
    }

    // render titles
    $("q1Title").textContent = CONFIG.text.q1;
    $("q2Title").textContent = CONFIG.text.q2;
    $("q3Title").textContent = CONFIG.text.q3;

    // Runaway events
    $("q1No").addEventListener("mouseenter", moveNoButton);
    $("q1No").addEventListener("touchstart", (e) => {
      if(noJumps < MAX_JUMPS){
        e.preventDefault();
        moveNoButton();
      }
    }, { passive:false });

    // wiring
    $("q1Yes").addEventListener("click", () => { resetRunaway(); setActiveScene(3); });

    $("q1No").addEventListener("click", () => {
      if(noJumps < MAX_JUMPS){
        moveNoButton();
        return;
      }
      setActiveScene(2);
    });

    $("q2Yes").addEventListener("click", () => setActiveScene(3));
    $("q2No").addEventListener("click",  () => goFinal("softNo"));

    $("q3Yes").addEventListener("click", () => goFinal("yesDate"));
    $("q3Walk").addEventListener("click", () => goFinal("walk"));

    $("copyBtn").addEventListener("click", async () => {
      const text = $("copyBtn").dataset.copy || copyPayload || "";
      const ok = await safeCopy(text);
      if(ok){
        $("copyBtn").textContent = "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
        showToast("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω");
        setTimeout(()=> $("copyBtn").textContent = "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å", 900);
      }else{
        showToast("–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å");
      }
    });

    $("tgBtn").addEventListener("click", async () => {
      const text = $("copyBtn").dataset.copy || copyPayload || "";
      const ok = await safeCopy(text);
      if(ok){
        showToast("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω ‚Äî –≤—Å—Ç–∞–≤—å –≤ —á–∞—Ç");
      }else{
        showToast("–°–∫–æ–ø–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é –∫–Ω–æ–ø–∫–æ–π ¬´–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å¬ª");
      }
      window.open(CONFIG.telegram.url, "_blank", "noopener");
    });

    $("restartBtn").addEventListener("click", () => {
      resetRunaway();
      setActiveScene(1);
      spawnHearts(10);
    });

    setTimeout(()=>spawnHearts(10), 220);
  </script>
</body>
</html>